<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>D3 Pie Chart</title>
  <style>
    body {
      font-family: sans-serif;
    }

    .arc path {
      stroke: white;
    }

    .arc text {
      font-size: 12px;
      text-anchor: middle;
      fill: white;
    }
  </style>
</head>

<body>
  <svg width="500" height="500"></svg>
  <!-- Load D3 -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script>
    // Sample data array (replace or load dynamically)
    const data = [
      { label: "A", value: 30 },
      { label: "B", value: 70 },
      { label: "C", value: 45 },
      { label: "D", value: 65 },
      { label: "E", value: 20 }
    ];

    // SVG dimensions
    const svg = d3.select("svg"),
      width = +svg.attr("width"),
      height = +svg.attr("height"),
      radius = Math.min(width, height) / 2;

    const g = svg
      .append("g")
      .attr("transform", `translate(${width / 2}, ${height / 2})`);

    // Color scale
    const color = d3.scaleOrdinal()
      .domain(data.map(d => d.label))
      .range(d3.schemeCategory10);

    // Pie generator
    const pie = d3.pie()
      .sort(null)
      .value(d => d.value);

    // Arc generator
    const arc = d3.arc()
      .innerRadius(0)
      .outerRadius(radius - 10);

    // Label arc for positioning
    const labelArc = d3.arc()
      .innerRadius(radius * 0.7)
      .outerRadius(radius * 0.7);

    // Bind data and draw slices
    const arcs = g.selectAll(".arc")
      .data(pie(data))
      .enter()
      .append("g")
      .attr("class", "arc");

    arcs.append("path")
      .attr("d", arc)
      .attr("fill", d => color(d.data.label));

    // Add labels
    arcs.append("text")
      .attr("transform", d => `translate(${labelArc.centroid(d)})`)
      .text(d => d.data.label);

  </script>
</body>

</html>